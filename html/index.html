<!DOCTYPE html>
<html>
    <head>
        <title>ImgHostr</title>
    </head>
    <body>
        <style>
            body {
                font-family:Arial;
            }
            #host * {
                margin:0;
            }
            #host {
                margin-bottom:1%;
            }
            #uploader input {
                margin-bottom:0.25%;
            }
        </style>
        <div id="host">
            <h1>Welcome to your ImgHostr server.</h1>
            <p>You can edit this HTML file to your liking for your server.</p>
            <noscript>To upload via HTML, please enable Javascript.</noscript>
        </div>
        <div id="uploader" style="display:none;">
            <input id="file" type="file" accept=".png"><br>
            <button onclick="upload()">Upload</button>
            <p id="prog"></p>
        </div>
        <p>If you are having problems uploading, try using <a href="/generateShareX">this ShareX uploader file</a>.</p>
        <script>
            document.getElementById("uploader").style.display = "block";
            function upload() {
                var xhr = new XMLHttpRequest();
                var d = new FormData();
                d.append("file", document.getElementById("file").files[0]);
                xhr.open("POST", "/upload");
                document.getElementById("prog").innerHTML = "Uploading...";
                xhr.send(d);
                xhr.onload = function () {
                    var json = JSON.parse(xhr.responseText);
                    console.log(json.file)
                    document.getElementById("prog").innerHTML = "<a href='" + json.file.toString() + "'>File</a>";
                }
            }
        </script>
    </body>
</html>